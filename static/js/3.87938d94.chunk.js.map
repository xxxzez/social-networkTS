{"version":3,"sources":["hoc/withAuthRedirect.tsx","components/Profile/MyPosts/Post/Post.module.css","components/Profile/Profile.module.css","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/MyPosts/MyPostsContainer.tsx","components/Profile/ProfileInfo/ProfileStatus.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx"],"names":["mapStateToProps","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","restProps","to","React","connect","module","exports","Post","memo","className","s","item","src","logo","alt","message","likesCount","onClick","deletePost","id","MyPosts","userId","postsElements","posts","map","p","key","AddPostFormRedux","onSubmit","values","addPost","newPostBody","maxLength20","maxLengthCreator","reduxForm","form","handleSubmit","Field","name","placeholder","component","Textarea","validate","required","MyPostsContainer","profilePage","dispatch","addPostAC","connector","ProfileStatus","useState","editMode","setEditMode","status","setStatus","useEffect","onBlur","updateStatus","type","value","autoFocus","onChange","e","currentTarget","ProfileInfo","profile","isOwner","savePhoto","Preloader","profilePicture","photos","large","width","target","files","length","aboutMe","lookingForAJob","lookingForAJobDescription","fullName","contacts","facebook","website","vk","youtube","github","mainLink","Profile","ProfileClassContainer","refreshProfile","match","params","authorizedUserId","history","push","getProfile","getStatus","componentDidMount","prevProps","ProfileContainer","compose","withRouter"],"mappings":"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","file":"static/js/3.87938d94.chunk.js","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { RootStateType } from '../Types'\n\ntype MSTPType = {\n    isAuth: boolean\n}\n\nconst mapStateToProps = (state: RootStateType): MSTPType => ({\n    isAuth: state.auth.isAuth,\n})\n\nexport function withAuthRedirect<WCP>(Component: React.ComponentType<WCP>) {\n    class RedirectComponent extends React.Component<MSTPType> {\n        render() {\n            let { isAuth, ...restProps } = this.props\n\n            if (!isAuth) {\n                return <Redirect to=\"/login\" />\n            }\n            return <Component {...(restProps as WCP)} />\n        }\n    }\n    return connect(mapStateToProps)(RedirectComponent)\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__ihtu9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"Profile_profile__3dzvr\",\"profilePicture\":\"Profile_profilePicture__2kcbj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"ProfileInfo_profile__2LHtf\",\"profilePicture\":\"ProfileInfo_profilePicture__3fsPe\"};","import React from 'react'\nimport s from './Post.module.css'\nimport logo from '../../../../assets/canadaFlag.jpeg'\n\ntype PostType = {\n    message: string\n    likesCount: number\n    id: string\n    deletePost: (userId: string) => void\n}\n\nconst Post: React.FC<PostType> = React.memo((props) => {\n    const onDelete = () => {\n        props.deletePost(props.id)\n    }\n    return (\n        <div className={s.item}>\n            <img src={logo} alt=\"\" />\n            {props.message}\n            <div>\n                <span>Like! </span>\n                {props.likesCount}\n                <button onClick={onDelete}>Delete post</button>\n            </div>\n        </div>\n    )\n})\n\nexport default Post\n","import React from 'react'\nimport Post from './Post/Post'\nimport s from './MyPosts.module.css'\nimport { MyPostsPropsFromRedux } from './MyPostsContainer'\nimport { Field, reduxForm } from 'redux-form'\nimport {\n    maxLengthCreator,\n    required,\n} from '../../../utils/validators/validators'\nimport { Textarea } from '../../common/FormsControls/FormsControls'\n\ntype PropsType = MyPostsPropsFromRedux\n\nconst MyPosts: React.FC<PropsType> = React.memo((props) => {\n    const onAddPost = (values: any) => {\n        props.addPost(values.newPostBody)\n    }\n    const deletePost = (userId: string) =>{\n        props.deletePost(userId)\n    }\n\n    const postsElements = props.posts.map((p) => (\n        <Post key={p.id} id={p.id} message={p.message} likesCount={p.likesCount} deletePost={deletePost} />\n    ))\n\n    return (\n        <div>\n            <h3>My posts</h3>\n            <AddPostFormRedux onSubmit={onAddPost} />\n            <div className={s.posts}>{postsElements}</div>\n        </div>\n    )\n})\n\nexport default MyPosts\n\nconst maxLength20 = maxLengthCreator(20)\n\nconst AddPostForm = (props: any) => {\n    return (\n        <form onSubmit={props.handleSubmit}>\n            <Field\n                name=\"newPostBody\"\n                placeholder=\"Send\"\n                component={Textarea}\n                validate={[required, maxLength20]}\n            ></Field>\n            <button>Send</button>\n        </form>\n    )\n}\nconst AddPostFormRedux = reduxForm({ form: 'profileAddPostForm' })(AddPostForm)\n","import { connect, ConnectedProps } from 'react-redux'\nimport { RootStateType } from '../../../Types'\nimport { addPostAC, deletePost } from '../../../redux/profile-reducer'\nimport MyPosts from './MyPosts'\n\nconst mapStateToProps = (state: RootStateType) => ({\n    posts: state.profilePage.posts,\n})\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return {\n        addPost: (newPostBody: string) => {\n            dispatch(addPostAC(newPostBody))\n        },\n        deletePost: (userId: string) => {\n            dispatch(deletePost(userId))\n        },\n    }\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps)\nexport type MyPostsPropsFromRedux = ConnectedProps<typeof connector>\nconst MyPostsContainer = connector(MyPosts)\n\nexport default MyPostsContainer\n","import React, { ChangeEvent, useEffect, useState } from 'react'\n\ntype PropsType = {\n    status: string\n    updateStatus: (status: string) => void\n}\n\nexport const ProfileStatus = (props: PropsType) => {\n    const [editMode, setEditMode] = useState(false)\n    const [status, setStatus] = useState(props.status)\n    useEffect(() => {\n        setStatus(props.status)\n    }, [props.status])\n\n    const activateEditMode = () => {\n        setEditMode(true)\n    }\n    const deactivateEditMode = () => {\n        setEditMode(false)\n        props.updateStatus(status)\n    }\n    const onStatusChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setStatus(e.currentTarget.value)\n    }\n    return (\n        <div>\n            {!editMode && (\n                <div>\n                    <span onClick={activateEditMode}>{status || '-----'}</span>\n                </div>\n            )}\n            {editMode && (\n                <div>\n                    <input\n                        onBlur={deactivateEditMode}\n                        type=\"text\"\n                        value={status}\n                        autoFocus\n                        onChange={onStatusChange}\n                    />\n                </div>\n            )}\n        </div>\n    )\n}","import React, { ChangeEvent } from 'react'\nimport s from './ProfileInfo.module.css'\nimport { Preloader } from '../../common/Preloader/Preloader'\nimport { ProfileType } from '../../../Types'\nimport profilePicture from '../../../assets/profilePicture.png'\nimport { ProfileStatus } from './ProfileStatus'\n\ntype PropsType = {\n    profile: ProfileType | null\n    status: string\n    updateStatus: (status: string) => void\n    isOwner: boolean\n    savePhoto: (file: any) => void\n}\n\nconst ProfileInfo: React.FC<PropsType> = ({\n    profile,\n    status,\n    updateStatus,\n    isOwner,\n    savePhoto,\n}) => {\n    if (!profile) {\n        return <Preloader />\n    }\n\n    const mainPhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files?.length) {\n            savePhoto(e.target.files[0])\n        }\n    }\n\n    return (\n        <div className={s.profile}>\n            <div className={s.profilePicture}>\n                {profile.photos.large ? (\n                    <img src={profile.photos.large} alt=\"\" />\n                ) : (\n                    <img src={profilePicture} alt=\"\" width=\"300px\" />\n                )}\n            </div>\n            {isOwner && <input type=\"file\" onChange={mainPhotoSelected} />}\n\n            <ProfileStatus status={status} updateStatus={updateStatus} />\n\n            <h3>About me: {profile.aboutMe}</h3>\n            <h3>\n                Looking for a job?{' '}\n                {profile.lookingForAJob ? 'Yes' : 'Currently no!'}\n            </h3>\n            <h3>\n                What kind of job are u looking for?{' '}\n                {profile.lookingForAJobDescription}\n            </h3>\n            <h3>Name: {profile.fullName}</h3>\n            <h3>UserId: {profile.userId}</h3>\n            <h3>Facebook link: {profile.contacts.facebook}</h3>\n            <h3>Your website link: {profile.contacts.website}</h3>\n            <h3>VK link: {profile.contacts.vk}</h3>\n            <h3>Youtube: {profile.contacts.youtube}</h3>\n            <h3>Github: {profile.contacts.github}</h3>\n            <h3>Email: {profile.contacts.mainLink}</h3>\n\n            <div>\n                <h3>Welcome to my page guys! Happy to see you here!</h3>\n            </div>\n        </div>\n    )\n}\n\nexport default ProfileInfo\n","import React from 'react'\nimport { ProfileType } from '../../Types'\nimport MyPostsContainer from './MyPosts/MyPostsContainer'\nimport s from './Profile.module.css'\nimport ProfileInfo from './ProfileInfo/ProfileInfo'\n\ntype PropsType = {\n    profile: ProfileType | null\n    status: string\n    updateStatus: (status: string) => void\n    isOwner: boolean\n    savePhoto: (file: any) => void\n}\n\nexport const Profile: React.FC<PropsType> = (props) => {\n    return (\n        <div className={s.profile}>\n            <ProfileInfo\n                profile={props.profile}\n                status={props.status}\n                updateStatus={props.updateStatus}\n                isOwner={props.isOwner}\n                savePhoto={props.savePhoto}\n            />\n            <MyPostsContainer />\n        </div>\n    )\n}\n","import React from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\nimport { Profile } from './Profile'\nimport {\n    getProfile,\n    getStatus,\n    updateStatus,\n    savePhoto,\n} from '../../redux/profile-reducer'\nimport { RootStateType } from '../../Types'\nimport { RouteComponentProps, withRouter } from 'react-router-dom'\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect'\nimport { compose } from 'redux'\n\ntype PathParamsType = {\n    userId: any\n}\nexport type ProfilePropsFromRedux = ConnectedProps<typeof connector>\ntype PropsType = RouteComponentProps<PathParamsType> & ProfilePropsFromRedux\n\nclass ProfileClassContainer extends React.Component<PropsType> {\n    refreshProfile = () => {\n        let userId = this.props.match.params.userId\n        if (!userId) {\n            userId = this.props.authorizedUserId\n            if (!userId) {\n                this.props.history.push('/login')\n            }\n        }\n        this.props.getProfile(userId)\n        this.props.getStatus(userId)\n    }\n    componentDidMount = () => {\n        this.refreshProfile()\n    }\n    componentDidUpdate(prevProps: PropsType) {\n        if (this.props.match.params.userId !== prevProps.match.params.userId) {\n            this.refreshProfile()\n        }\n    }\n\n    render() {\n        return (\n            <Profile\n                profile={this.props.profile}\n                status={this.props.status}\n                updateStatus={this.props.updateStatus}\n                isOwner={!this.props.match.params.userId}\n                savePhoto={this.props.savePhoto}\n            />\n        )\n    }\n}\n\nconst mapStateToProps = (state: RootStateType) => ({\n    profile: state.profilePage.profile,\n    status: state.profilePage.status,\n    authorizedUserId: state.auth.id,\n    isAuth: state.auth.isAuth,\n})\n\nconst connector = connect(mapStateToProps, {\n    getProfile,\n    getStatus,\n    updateStatus,\n    savePhoto,\n})\n\nconst ProfileContainer = compose<React.ComponentType>(\n    connector,\n    withRouter,\n    withAuthRedirect\n)(ProfileClassContainer)\n\nexport default ProfileContainer\n"],"sourceRoot":""}